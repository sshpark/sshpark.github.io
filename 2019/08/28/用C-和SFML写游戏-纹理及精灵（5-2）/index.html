<!DOCTYPE html>
<html lang="zh-cn">
  <head><meta charset="UTF-8"/>
<!-- hexo-inject:begin --><!-- hexo-inject:end --><meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>


<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">

<meta name="description" content="ç”¨C++å’ŒSFMLå†™æ¸¸æˆ-çº¹ç†åŠç²¾çµï¼ˆ5.2ï¼‰"/><meta name="keywords" content="SFML, ç”¨C++å’ŒSFMLå†™æ¸¸æˆ, sshpark" /><link rel="alternate" href="/atom.xml" title="sshpark"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=2.11.0" />
<link rel="canonical" href="http://sshpark.com.cn/2019/08/28/ç”¨C-å’ŒSFMLå†™æ¸¸æˆ-çº¹ç†åŠç²¾çµï¼ˆ5-2ï¼‰/"/>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({ tex2jax: { inlineMath: [['$','$'], ['\(','\)']] } });
  </script>
  <script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML"></script>
<link rel="stylesheet" type="text/css" href="/css/style.css?v=2.11.0" />

<script id="baidu_analytics">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?df6c0480b02517594e4a02db8f89fbcb";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script><script id="baidu_push">
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>
<script src="//cdn1.lncld.net/static/js/3.1.1/av-min.js"></script>
  <script id="leancloud">
    AV.init({
      appId: "jMG2YYii7aWm9mTVyeeNa3fi-gzGzoHsz",
      appKey: "Hc4f0RfAVP3HQwmQkkDfgImA"
    });
  </script><script>
  window.config = {"leancloud":{"app_id":"jMG2YYii7aWm9mTVyeeNa3fi-gzGzoHsz","app_key":"Hc4f0RfAVP3HQwmQkkDfgImA"},"toc":true,"fancybox":false,"pjax":"","latex":true};
</script>

    <title>ç”¨C++å’ŒSFMLå†™æ¸¸æˆ-çº¹ç†åŠç²¾çµï¼ˆ5.2ï¼‰ - sshpark</title>
  <meta name="generator" content="Hexo 4.1.1"><link rel="alternate" href="/atom.xml" title="sshpark" type="application/atom+xml"><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</head>

  <body><div id="mobile-navbar" class="mobile-navbar">
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="mobile-header-logo">
    <a href="/." class="logo">sshpark</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>

<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list"><a href="/">
        <li class="mobile-menu-item">é¦–é¡µ
          </li>
      </a><a href="/archives/">
        <li class="mobile-menu-item">å½’æ¡£
          </li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">æ ‡ç­¾
          </li>
      </a><a href="/about/">
        <li class="mobile-menu-item">å…³äº
          </li>
      </a><a href="/links/">
        <li class="mobile-menu-item">å‹é“¾
          </li>
      </a></ul>
</nav>
<div class="container" id="mobile-panel">
      <header id="header" class="header"><div class="logo-wrapper">
  <a href="/." class="logo">sshpark</a>
</div>

<nav class="site-navbar"><ul id="menu" class="menu"><li class="menu-item">
          <a class="menu-item-link" href="/">
            é¦–é¡µ
            </a>
        </li>
      <li class="menu-item">
          <a class="menu-item-link" href="/archives/">
            å½’æ¡£
            </a>
        </li>
      <li class="menu-item">
          <a class="menu-item-link" href="/tags/">
            æ ‡ç­¾
            </a>
        </li>
      <li class="menu-item">
          <a class="menu-item-link" href="/about/">
            å…³äº
            </a>
        </li>
      <li class="menu-item">
          <a class="menu-item-link" href="/links/">
            å‹é“¾
            </a>
        </li>
      </ul></nav>
</header>

      <main id="main" class="main">
        <div class="content-wrapper">
          <div id="content" class="content"><article class="post">
    <header class="post-header">
      <h1 class="post-title">ç”¨C++å’ŒSFMLå†™æ¸¸æˆ-çº¹ç†åŠç²¾çµï¼ˆ5.2ï¼‰
        </h1>

      <div class="post-meta">
        <span class="post-time">
          2019-08-28
        </span><span class="post-visits"
             data-url="/2019/08/28/%E7%94%A8C-%E5%92%8CSFML%E5%86%99%E6%B8%B8%E6%88%8F-%E7%BA%B9%E7%90%86%E5%8F%8A%E7%B2%BE%E7%81%B5%EF%BC%885-2%EF%BC%89/"
             data-title="ç”¨C++å’ŒSFMLå†™æ¸¸æˆ-çº¹ç†åŠç²¾çµï¼ˆ5.2ï¼‰">
          é˜…è¯»æ¬¡æ•° 0
        </span>
        </div>
    </header>

    <div class="post-toc" id="post-toc">
    <h2 class="post-toc-title">æ–‡ç« ç›®å½•</h2>
    <div class="post-toc-content">
      <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#ä¸€ä»€ä¹ˆæ˜¯ç²¾çµ"><span class="toc-text">ä¸€ã€ä»€ä¹ˆæ˜¯ç²¾çµ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#äºŒtransformables-å’Œ-drawables"><span class="toc-text">äºŒã€Transformables å’Œ Drawables</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ä¸‰sprite-ç±»çš„å…¶ä»–å±æ€§"><span class="toc-text">ä¸‰ã€Sprite ç±»çš„å…¶ä»–å±æ€§</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#å››èµ„æºç®¡ç†"><span class="toc-text">å››ã€èµ„æºç®¡ç†</span></a></li></ol>
    </div>
  </div><div class="post-content"><p>ä¸Šä¸€ç¯‡<a href="http://www.sshpark.com.cn/2019/08/25/ç”¨C++å’ŒSFMLå†™æ¸¸æˆ-çº¹ç†åŠç²¾çµï¼ˆ5.1ï¼‰" target="_blank" rel="noopener">æ–‡ç« </a>ä»‹ç»äº†çº¹ç†çš„ä½¿ç”¨ã€‚è¿™ä¸€èŠ‚å°†ä¼šä»‹ç» <strong>ç²¾çµ</strong> ä»¥åŠèµ„æºç®¡ç†ã€‚</p>
<h3 id="ä¸€ä»€ä¹ˆæ˜¯ç²¾çµ">ä¸€ã€ä»€ä¹ˆæ˜¯ç²¾çµ</h3>
<p>åœ¨è¿™ä¹‹å‰ä½ å¯èƒ½å¬è¯´è¿‡<strong>ç²¾çµ</strong>çš„æ¦‚å¿µã€‚å®é™…ä¸Šï¼Œç²¾çµæ˜¯è´´æœ‰çº¹ç†çš„<strong>â€œç”»å¸ƒâ€</strong>ã€‚è¯´åˆ°è¿™é‡Œï¼Œæœ‰äººå¯èƒ½ä¼šè¯´ï¼Œå‰é¢çš„ <code>Shpae</code>ç±»ä¸æ˜¯ä¹Ÿä¸€æ ·çš„å—ï¼Ÿç­”æ¡ˆæ˜¯çš„ï¼Œä½†æ˜¯ç²¾çµæœ‰ä¸€ç‚¹ä¸åŒã€‚</p>
<p>æœ€é‡è¦çš„ä¸åŒç‚¹æ˜¯ï¼Œç²¾çµæ€»æ˜¯ç»˜åˆ¶åœ¨çº¹ç†çŸ©å½¢ä¸­ï¼Œè€Œ <code>Shape</code> å¯ä»¥ä¸å¿…è¿™æ ·ï¼Œç²¾çµæ€»æ˜¯ä¸ä¸€ä¸ªçº¹ç†å…³è”çš„ï¼Œå®ƒä¸èƒ½å•ç‹¬å­˜åœ¨ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œ <code>Sprite</code>ç±»æœ‰ä¸€ä¸ªç±»ä¼¼ä¸ <code>Shape::setFillColor()</code>çš„å‡½æ•° <code>Sprite::setColor()</code>ã€‚å½“å®ƒä»¬éƒ½ä¸ä¸€ä¸ªçº¹ç†ï¼ˆTextureï¼‰ç›¸å…³è”çš„æ—¶å€™ï¼Œæ•ˆæœæ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯å¦‚æœ <code>Sprite</code> æ²¡æœ‰ä¸çº¹ç†ï¼ˆTextureï¼‰å…³è”çš„è¯ï¼Œå®ƒä¸ä¼šè¢«æŒ‡å®šçš„é¢œè‰²ç»˜åˆ¶ï¼Œç›¸åçš„æ˜¯ <code>Shape</code> æ˜¯å¯ä»¥è¢«æŒ‡å®šé¢œè‰²ç»˜åˆ¶çš„ã€‚</p>
<p>é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Ÿä¸ºä»€ä¹ˆæˆ‘ä»¬è¦ä½¿ç”¨ç²¾çµè€Œä¸æ˜¯ <code>Shape</code>å‘¢ï¼Ÿä»ä¸Šé¢çš„æè¿°æ¥çœ‹ï¼Œç²¾çµä¼¼ä¹æ˜¯å¼±åŒ–ç‰ˆçš„<code>Shape</code>ã€‚çœŸæ­£çš„åŸå› æ˜¯å› ä¸ºç²¾çµç®€å•æœ‰ç”¨ã€‚</p>
<a id="more"></a>
<p>è§‚å¯Ÿä¸€ä¸‹ä»£ç ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ›å»ºä¸€ä¸ªå¸¦çº¹ç†çš„shape</span></span><br><span class="line">sf::<span class="function">RectangleShape <span class="title">rectShape</span><span class="params">(sf::Vector2f(<span class="number">100</span>, <span class="number">100</span>))</span></span>;</span><br><span class="line">rectShape.setTexture(&amp;texture);</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºç²¾çµ</span></span><br><span class="line">sf::<span class="function">Sprite <span class="title">sp</span><span class="params">(texture)</span></span>;</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥å¾ˆæ˜æ˜¾çš„çœ‹åˆ°åˆ›å»ºä¸€ä¸ªç²¾çµæ˜¯ä¸€ä¸ªæ›´åŠ ç®€å•çš„è¿‡ç¨‹ã€‚å®é™…ä¸Šï¼Œè¿™ä¹Ÿæ˜¯ <code>Sprite</code>ç±»åœ¨ <strong>SFML </strong> ä¸­è¢«ä½¿ç”¨çš„ä¸»è¦ç›®çš„----å°½å¯èƒ½å¿«é€Ÿï¼Œè½»æ¾åœ°åœ¨å±å¹•ä¸Šæ¸²æŸ“çº¹ç†ã€‚</p>
<p></br></p>
<h3 id="äºŒtransformables-å’Œ-drawables">äºŒã€Transformables å’Œ Drawables</h3>
<p><code>Sprite</code> ç±»èµ·æºäºè¿™ä¸¤ä¸ªç±» ---- <code>Transformable</code> å’Œ <code>Drawable</code>ã€‚</p>
<p><code>Drawable</code>ç±»æ˜¯ä¸€ä¸ªæ¥å£ï¼Œå®ƒæœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³• <code>Drawable::deaw()</code>ï¼Œå®ƒçš„å­ç±»å¿…é¡»å®ç°è¿™ä¸ªæ–¹æ³•ï¼Œè¿›è€Œä½¿å¾—å­ç±»æ˜¯å¯ä»¥è¢«ç»˜åˆ¶åˆ°ç”»å¸ƒä¸Šçš„ï¼ˆä¾‹å¦‚ <code>RenderWindow</code>ï¼‰</p>
<p><code>Transformable</code> æ‹¥æœ‰ä½ç½®ã€æ—‹è½¬ã€ç¼©æ”¾ä»¥åŠåŸç‚¹ç­‰å±æ€§ã€‚å¯ä»¥é€šè¿‡<code>Transformable::setPosition()</code>ï¼Œ<code>Transformable::getPosition()</code>ï¼Œ<code>Transformable::move()</code> ç­‰æ–¹æ³•å»è®¿é—®è¿™äº›å±æ€§ã€‚</p>
<p>è¿™äº›æ–¹æ³•æˆ‘ä»¬åœ¨ <code>Shape</code> ç±»ä¸­ä¹Ÿä½¿ç”¨è¿‡ï¼Œå› ä¸º <code>Shape</code> ç»§æ‰¿äº†è¿™ä¸¤ä¸ªç±»ã€‚ç±»ä¼¼çš„ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ç»§æ‰¿è¿™ä¸¤ä¸ªç±»æ¥å®ç°è‡ªå·±çš„ç²¾çµã€‚</p>
<p></br></p>
<h3 id="ä¸‰sprite-ç±»çš„å…¶ä»–å±æ€§">ä¸‰ã€Sprite ç±»çš„å…¶ä»–å±æ€§</h3>
<p>åœ¨å®ç°ç¢°æ’æ£€æµ‹ï¼ˆCollision Detectionï¼‰æ—¶ï¼Œä¸å¯é¿å…åœ°éœ€è¦çŸ¥é“åœºæ™¯ä¸­ç‰©ä½“çš„å°ºå¯¸æˆ–è€…è¾¹ç•Œã€‚æˆ‘ä»¬ç§°ä¹‹ä¸ºâ€œåŒ…å›´ç›’æŠ€æœ¯â€ï¼ˆBounding Boxï¼‰ã€‚å¸¸è§çš„åŒ…å›´ç›’æœ‰ï¼šSphereã€AABBã€OBBã€FDHç­‰</p>
<p><code>Sprite</code> ä½¿ç”¨äº†AABBåŒ…å›´ç›’<strong>ï¼ˆAxis-aligned bounding boxï¼‰</strong>çš„æ–¹æ³•ã€‚<code>Sprite::getLocalBounds()</code> å’Œ <code>Sprite::getGlobalBounds()</code> éƒ½èƒ½å¤Ÿè®¡ç®—å‡º <code>Sprite</code> çš„ AABB å±æ€§ã€‚åŒºåˆ«æ˜¯ <code>Sprite::getLocalBounds()</code> å¿½ç•¥äº†å®ä½“çš„å˜æ¢å±æ€§ï¼ˆå¹³ç§»ã€æ—‹è½¬ã€ç¼©æ”¾ã€‚ã€‚ã€‚ï¼‰ï¼Œè€Œ <code>Sprite::getGlobalBounds()</code> è€ƒè™‘äº†è¿™äº›å±æ€§ã€‚é€šè¿‡è¿™ä¸¤ä¸ªæ–¹æ³•è¿”å›çš„ <code>FloatRect</code> å¯ä»¥ç”¨äºç¢°æ’æ£€æµ‹ã€‚</p>
<p></br></p>
<h3 id="å››èµ„æºç®¡ç†">å››ã€èµ„æºç®¡ç†</h3>
<p>æ— è®ºæ˜¯åšæ¸¸æˆè¿˜æ˜¯å¤šåª’ä½“ç¨‹åºï¼Œå‡†ç¡®ã€é«˜æ•ˆçš„ç®¡ç†å¥½èµ„æºæ˜¯å¾ˆé‡è¦çš„ã€‚ç¡®ä¿å¥½èµ„æº<strong>ä¸è¢«æ„å¤–çš„é”€æ¯</strong>ä»¥åŠ<strong>ä¸é‡å¤è¯»å–åŒä¸€èµ„æº</strong>æ˜¯æˆ‘ä»¬æ„å»ºä¸€ä»½å¥å£®çš„ä»£ç çš„åŸºæœ¬éœ€æ±‚ã€‚</p>
<p>éœ€è¦æ˜ç™½ä¸€ä¸ªäº‹å®ï¼Œ<strong>C++</strong>é‡Œæ ˆä¸­çš„å¯¹è±¡åœ¨ä¸éœ€è¦çš„ä¼šè¢«è‡ªåŠ¨æ¸…é™¤ã€‚ä½†æ˜¯åœ¨æŸäº›ç¼–ç¨‹è¯­è¨€ä¸­ï¼Œå¯¹è±¡å­˜å‚¨åœ¨å †ä¸­ï¼ˆå®ç°äº†å†…å­˜ç®¡ç†ï¼‰ã€‚å› æ­¤ï¼Œæˆ‘ä»¬çš„ç¨‹åºè¦ç¡®ä¿å¯¹è±¡åœ¨è¢«ä½¿ç”¨çš„æ—¶å€™æ˜¯å­˜æ´»çš„ã€‚ä¸‹é¢çš„ä¾‹å­å±•ç¤ºäº†å½“å‡½æ•°é€€å‡ºçš„æ—¶å€™ï¼Œçº¹ç†ä¹Ÿè¢«é”€æ¯äº†ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sf::<span class="function">Sprite <span class="title">createSprite</span><span class="params">(<span class="built_in">std</span>::<span class="built_in">string</span> <span class="keyword">const</span>&amp; filename)</span> </span>&#123;</span><br><span class="line">    sf::Texture texture;</span><br><span class="line">    texture.loadFromFile(filename);</span><br><span class="line">    <span class="comment">// å‡½æ•°è¿”å›æ—¶ï¼Œtexture å·²ç»è¢«é”€æ¯äº†</span></span><br><span class="line">    <span class="keyword">return</span> sf::Sprite(texture);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¦‚æœæˆ‘ä»¬ä½¿ç”¨ä¸Šé¢çš„æ–¹æ³•åˆ›å»º <code>Sprite</code>ï¼Œé‚£ä¹ˆåœ¨ç»˜åˆ¶ <code>Sprite</code> çš„æ—¶å€™å°†ä¼šæ˜¯ä¸€ç‰‡ç©ºç™½ï¼Œ<code>texture</code>ä¸ä¼šè¢«æ˜¾ç¤ºå‡ºæ¥ã€‚</p>
<p>åˆ›å»ºä¸€ä¸ªèµ„æºç®¡ç†å™¨å»ç®¡ç†èµ„æºçš„ç”Ÿå‘½å‘¨æœŸæ˜¯å¾ˆæœ‰ç”¨çš„ï¼Œä¸‹é¢è¯•èµ„æºç®¡ç†å™¨çš„å¤´æ–‡ä»¶å®šä¹‰ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> ASSET_MANAGER_H</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ASSET_MANAGER_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;SFML/Graphics.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AssetManager</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    AssetManager();</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">static</span> sf::<span class="function">Texture&amp; <span class="title">GetTexture</span><span class="params">(<span class="built_in">std</span>::<span class="built_in">string</span> <span class="keyword">const</span>&amp; filename)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">map</span>&lt;<span class="built_in">std</span>::<span class="built_in">string</span>, sf::Texture&gt; m_Textures;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">static</span> AssetManager* sInstance;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬çš„ <code>AssetManager</code> æ˜¯ä¸€ä¸ªå•ä¾‹ã€‚è¿™æ ·å­çš„è¯æˆ‘ä»¬å¯ä»¥åœ¨ç¨‹åºçš„ä»»ä½•åœ°æ–¹é€šè¿‡é™æ€æ–¹æ³• <code>GetTexture()</code> è®¿é—®èµ„æºè€Œä¸ç”¨å…ˆå»è·å– <code>AssetManager</code> å¯¹è±¡çš„å¼•ç”¨ã€‚</p>
<p>é‡Œé¢çš„ <strong>map</strong> ç±»å‹å˜é‡å­˜å‚¨äº†èµ„æºæ˜¯å¦è¯»å–è¿‡ï¼Œæ–¹ä¾¿åé¢åˆ¤æ–­æ˜¯å¦éœ€è¦å†æ¬¡è¯»å–èµ„æºã€‚</p>
<p>ç°åœ¨æ¥çœ‹çœ‹å®ç°ä»£ç ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"AssetManager.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;assert.h&gt;</span></span></span><br><span class="line"></span><br><span class="line">AssetManager* AssetManager::sInstance = <span class="literal">nullptr</span>;</span><br><span class="line"></span><br><span class="line">AssetManager::AssetManager() &#123;</span><br><span class="line">    assert(sInstance == <span class="literal">nullptr</span>);</span><br><span class="line">    sInstance = <span class="keyword">this</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>assert</strong> ç¡®ä¿äº†æˆ‘ä»¬çš„èµ„æºç®¡ç†å™¨åªæœ‰ä¸€ä¸ªå®ä¾‹ã€‚</p>
<p>å†æ¥çœ‹çœ‹ <code>AssetManager::GetTexture()</code> çš„å®ç°ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">sf::Texture&amp; AssetManager::GetTexture(<span class="built_in">std</span>::<span class="built_in">string</span> <span class="keyword">const</span>&amp; filename) &#123;</span><br><span class="line">    <span class="keyword">auto</span>&amp; texMap = sInstance-&gt;m_Textures;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">auto</span> pairFound = texMap.find(filename);</span><br><span class="line">    <span class="keyword">if</span> (pairFound != texMap.end()) &#123;</span><br><span class="line">        <span class="keyword">return</span> pairFound-&gt;second;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">auto</span>&amp; texture = texMap[filename];</span><br><span class="line">    texture.loadFromFile(filename);</span><br><span class="line">    <span class="keyword">return</span> texture;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä»£ç å¾ˆå®¹æ˜“æ‡‚ï¼Œå¦‚æœèµ„æºå·²ç»è¢«è¯»å–è¿‡äº†ï¼Œç›´æ¥è¿”å›ï¼Œå¦åˆ™ä»ç»™å®šè·¯å¾„è¯»å–ã€‚</p>
<p>æœ€åï¼Œçœ‹çœ‹æˆ‘ä»¬çš„èµ„æºç®¡ç†å™¨å¦‚ä½•ä½¿ç”¨ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;SFML/Graphics.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"AssetManager.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    sf::<span class="function">RenderWindow <span class="title">window</span><span class="params">(sf::VideoMode(<span class="number">640</span>, <span class="number">480</span>), <span class="string">"AssetManager"</span>)</span></span>;</span><br><span class="line">    AssetManager manager;</span><br><span class="line">    </span><br><span class="line">    sf::Sprite sprite1 = sf::Sprite(AssetManager::GetTexture(<span class="string">"1.png"</span>));</span><br><span class="line">    sf::Sprite sprite2 = sf::Sprite(AssetManager::GetTexture(<span class="string">"2.png"</span>));</span><br><span class="line">    sf::Sprite sprite3 = sf::Sprite(AssetManager::GetTexture(<span class="string">"1.png"</span>));</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">while</span> (window.isOpen()) &#123;</span><br><span class="line">        <span class="comment">// Game loop</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// main å‡½æ•°è¿”å›æ—¶ï¼Œmanager è¢«é”€æ¯</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>sprite3</strong> ä¸ä¼šä»ç£ç›˜è¯»å–ï¼Œè€Œæ˜¯ä» <strong>texture</strong> ç¼“å­˜ä¸­è¯»å–ï¼Œæé«˜äº†æ•ˆç‡ã€‚</p>
<p></br></p>
<p>ä¸‹ä¸€èŠ‚å°†ä¼šä»‹ç»åŠ¨ç”»ç²¾çµğŸ˜ƒã€‚</p>

      </div>
      
      <footer class="post-footer">
        <div class="post-tags">
            <a href="/tags/SFML/">SFML</a>
            <a href="/tags/%E7%94%A8C-%E5%92%8CSFML%E5%86%99%E6%B8%B8%E6%88%8F/">ç”¨C++å’ŒSFMLå†™æ¸¸æˆ</a>
            </div>
        
        <nav class="post-nav"><a class="prev" href="/2019/08/31/%E7%94%A8C-%E5%92%8CSFML%E5%86%99%E6%B8%B8%E6%88%8F-%E8%AE%A9%E6%88%91%E4%BB%AC%E7%9A%84%E7%B2%BE%E7%81%B5%E5%8A%A8%E8%B5%B7%E6%9D%A5-6/">
        <i class="iconfont icon-left"></i>
        <span class="prev-text nav-default">ç”¨C++å’ŒSFMLå†™æ¸¸æˆ-è®©æˆ‘ä»¬çš„ç²¾çµåŠ¨èµ·æ¥ï¼ˆ6ï¼‰</span>
        <span class="prev-text nav-mobile">ä¸Šä¸€ç¯‡</span>
      </a>
    <a class="next" href="/2019/08/25/%E7%94%A8C++%E5%92%8CSFML%E5%86%99%E6%B8%B8%E6%88%8F-%E7%BA%B9%E7%90%86%E5%8F%8A%E7%B2%BE%E7%81%B5%EF%BC%885.1%EF%BC%89/">
        <span class="next-text nav-default">ç”¨C++å’ŒSFMLå†™æ¸¸æˆ-çº¹ç†åŠç²¾çµï¼ˆ5.1ï¼‰</span>
        <span class="prev-text nav-mobile">ä¸‹ä¸€ç¯‡</span>
        <i class="iconfont icon-right"></i>
      </a>
    </nav></footer>
    </article></div><div class="comments" id="comments"><div id="utterances-container"></div>
    </div></div>
      </main>

      <footer id="footer" class="footer"><div class="social-links"><a href="mailto:sshpark@163.com" class="iconfont icon-email" title="email"></a>
        <a href="https://github.com/sshpark" target="_blank" rel="noopener" class="iconfont icon-github" title="github"></a>
        <a href="/atom.xml" class="iconfont icon-rss" title="rss"></a>
    </div><div class="copyright">
  <span class="power-by">
    ç”± <a class="hexo-link" href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> å¼ºåŠ›é©±åŠ¨
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    ä¸»é¢˜ - 
    <a class="theme-link" href="https://github.com/ahonn/hexo-theme-even" target="_blank" rel="noopener">Even</a>
  </span>

  <span class="copyright-year">
    ç²¤ICPå¤‡17102498å·
  </span>

  <span class="copyright-year">&copy;2017 - 2021<span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">Sshpark</span>

  </span>
</div>
</footer>

      <div class="back-to-top" id="back-to-top">
        <i class="iconfont icon-up"></i>
      </div>
    </div><script>
    var container = document.getElementById('utterances-container')
    var script = document.createElement('script')
    script.src = 'https://utteranc.es/client.js'
    script.setAttribute('repo', 'sshpark/MASM')
    script.setAttribute('issue-term', 'title')
    script.setAttribute('theme', 'github-light')
    script.setAttribute('label', 'utterances')
    script.crossorigin = 'anonymous'
    script.async = true

    container.appendChild(script)
  </script><script type="text/javascript" src="/lib/jquery/jquery.min.js"></script>
  <script type="text/javascript" src="/lib/slideout/slideout.js"></script>
  <script type="text/javascript" src="/js/src/even.js?v=2.11.0"></script><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</body>
</html>
